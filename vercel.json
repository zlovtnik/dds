{
    "version": 2,
    "builds": [
        {
            "src": "api/**/*.rs",
            "use": "vercel-rust@4.0.8",
            "config": {
                "distDir": "api",
                "buildCommand": "CARGO_TARGET_DIR=/vercel/output/target cargo build --bin graphql --release"
            }
        },
        {
            "src": "public/**",
            "use": "@vercel/static"
        }
    ],
    "routes": [
        {
            "src": "/graphql",
            "dest": "/api/graphql"
        },
        {
            "src": "/graphiql",
            "dest": "/api/graphql"
        },
        {
            "src": "/(.*)",
            "dest": "/public/$1"
        }
    ],
    "env": {
        "RUST_BACKTRACE": "1",
        "RUST_LOG": "info",
        "SQLX_OFFLINE": "true",
        "CARGO_TARGET_DIR": "/vercel/output/target"
    }
}